<html>
    <title>Simulation</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, Helvetica, sans-serif;
        }
    
        .topnav {
            overflow: hidden;
            background-color: #f3f3f3;
        }
    
        .topnav a {
            float: right;
            color: black;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
            font-size: 17px;
        }
    
        .topnav a:hover {
            text-decoration-line: underline;
        }

        table, th, td {
            text-align: center;
            border: 1px solid black;
            border-collapse: collapse;
        }
    </style>

<div class="topnav">
    <a href="references.html">References</a>
    <a href="posttest.html">Posttest</a>
    <a style="color: rgb(238, 106, 30);" href="#">Simulation</a>
    <a href="procedure.html">Procedure</a>
    <a href="pretest.html">Pretest</a>
    <a href="theory.html">Theory</a>
    <a href="index.html">Aim</a>
</div>

<p style="font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif">
<u><h1 style="color: rgb(0, 0, 128 ); text-align: center; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; font-size: 35px;">Detection of Both SA0 and SA1 Faults on a 4-Bit EVEN Parity
    Checker Circuit <br> </h1></u>
    <h1 style="color: rgb(9, 9, 172); text-align: center; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; font-size: xx-large;"> 
    Simulator</h1><br>

<img id='circuit' src="images/circuit.jpg" style="position:absolute; width:950px; top:200px; left:200px" width="300" height="300"> 

<p style="position: absolute; left:1030px; width:100px; top: 385px; font-size: medium; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;"><b>Truth Table</b></p>
<img id='truthTable' src="images/truthTable.jpg" style="position:absolute; width:340px; top:420px; left:900px" width="340" height="290"> 


<p style="position:absolute; width:30px; top:235px; left:145px; font-size: medium; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;">x</p>
<img id='switchx' src="images/switchoff.jpg" style="position:absolute; width:30px; top:235px; left:175px" width="70" height="40" onclick = "changeSwitchImageX()">
<img id='inputx' src="images/switchoff.jpg" style="position:absolute; width:30px; top:235px; left:175px" width="70" height="40" onclick = "changeSwitchImageX()">
<input type='button' id='faultx' value="No fault" style="position:absolute; width:85px; top:225px; left:220px" onclick=changeFaultX()>
<br>

<p style="position:absolute; width:30px; top:295px; left:145px; font-size: medium; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;">y</p>
<img id='switchy' src="images/switchoff.jpg" style="position:absolute; width:30px; top:295px; left:175px" width="70" height="40" onclick = "changeSwitchImageY()"> 
<img id='inputy' src="images/switchoff.jpg" style="position:absolute; width:30px; top:295px; left:175px" width="70" height="40" onclick = "changeSwitchImageY()"> 
<input type='button' id='faulty' value="No fault" style="position:absolute; width:80px; top:285px; left:220px" onclick=changeFaultY()>
<br>

<p style="position:absolute; width:30px; top:385px; left:145px; font-size: medium; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;">z</p>
<img id='switchz' src="images/switchoff.jpg" style="position:absolute; width:30px; top:385px; left:175px" width="70" height="40" onclick = "changeSwitchImageZ()">
<img id='inputz' src="images/switchoff.jpg" style="position:absolute; width:30px; top:385px; left:175px" width="70" height="40" onclick = "changeSwitchImageZ()">
<input type='button' id='faultz' value="No fault" style="position:absolute; width:80px; top:375px; left:220px" onclick=changeFaultZ()>
<br>

<p style="position:absolute; width:30px; top:445px; left:145px; font-size: medium; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;">P</p>
<img id='switchp' src="images/switchoff.jpg" style="position:absolute; width:30px; top:445px; left:175px" width="70" height="40" onclick="changeImageP()"> 
<img id='inputp' src="images/switchoff.jpg" style="position:absolute; width:30px; top:445px; left:175px" width="70" height="40" onclick="changeImageP()"> 
<input type='button' id='faultp' value="No fault" style="position:absolute; width:80px; top:435px; left:220px" onclick="changeFaultP()">

<input type='button' id='faultxor1' value="No fault" style="position:absolute; width:80px; top:255px; left:535px" onclick="changeFaultXor1()">
<input type='button' id='faultxor2' value="No fault" style="position:absolute; width:80px; top:440px; left:535px" onclick="changeFaultXor2()">

<img id='outputC' src="images/ledoff.jpg" style="position:absolute; width:30px; top:335px; left:1135px" width="70" height="40">
<input type='button' id='faultc' value="No fault" style="position:absolute; width:80px; top:330px; left:960px" onclick="changeFaultC()">

<input type='button' id='run' value="Run" style="position:absolute; width:80px; top:530px; left:450px;" onclick="addToTable()">
<input type='button' id='reset' value="Reset" style="position:absolute; width:80px; top:530px; left:550px;" onclick="resetTable()">

<p style="padding-bottom: 10px;">
<table id="output" style="position:absolute; width: 480px; top:555px; left:300px; font-size: medium; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;">
    <thead>
    <tr style="text-align: center; background-color: #D7E5F0;">
      <th style="width:50px;">x</th>
      <th style="width:50px;">y</th>
      <th style="width:50px;">z</th>
      <th style="width:50px;">P</th>
      <th style="width:140px">Current Output, C</th>
      <th style="width:140px">Ideal Output</th>
    </tr>
    </thead>
    <tbody>
    </tbody>
</table>
</p>
</p>

<script>
function changeSwitchImageX(){
    var fx = document.getElementById("faultx");
    var imageX = document.getElementById("switchx");

    var inX = document.getElementById("inputx");
    if(inX.src.match("images/switchoff.jpg")) {
        inX.src = "images/switchon.jpg";
    }
    else {
       inX.src = "images/switchoff.jpg"; 
    }

    if(fx.value == "No fault" && imageX.src.match("switchon"))
    {
        imageX.src = "images/switchoff.jpg";
    }
    else if(fx.value == "No fault")
    {
        imageX.src = "images/switchon.jpg";
    }
    checkOutputC();
}

function changeFaultX() {
    var buttonx = document.getElementById("faultx");
    var imageX = document.getElementById("switchx");

    if(buttonx.value == "No fault")
    {
        buttonx.value = "Stuck at 0";
        imageX.src = "images/switchoff.jpg";
    }
    else if(buttonx.value == "Stuck at 0")
    {
        buttonx.value = "Stuck at 1";
        imageX.src = "images/switchon.jpg";
    }
    else    
        buttonx.value = "No fault";
    checkOutputC();
}

function changeSwitchImageY(){
    var fy = document.getElementById("faulty");
    var imageY = document.getElementById("switchy");

    var inY = document.getElementById("inputy");
    if(inY.src.match("images/switchoff.jpg")) {
        inY.src = "images/switchon.jpg";
    }
    else {
       inY.src = "images/switchoff.jpg"; 
    }

    if(fy.value == "No fault" && imageY.src.match("switchon"))
    {
        imageY.src = "images/switchoff.jpg";
    }
    else if(fy.value == "No fault")
    {
        imageY.src = "images/switchon.jpg";
    }
    checkOutputC();
}

function changeFaultY() {
    var buttony = document.getElementById("faulty");
    var imageY = document.getElementById("switchy");

    if(buttony.value == "No fault")
    {
        buttony.value = "Stuck at 0";
        imageY.src = "images/switchoff.jpg";
    }
    else if(buttony.value == "Stuck at 0")
    {
        buttony.value = "Stuck at 1";
        imageY.src = "images/switchon.jpg";
    }
    else    
        buttony.value = "No fault";
    checkOutputC();
}

function changeSwitchImageZ(){
    var fz = document.getElementById("faultz");
    var imageZ = document.getElementById("switchz");

    var inZ = document.getElementById("inputz");
    if(inZ.src.match("images/switchoff.jpg")) {
        inZ.src = "images/switchon.jpg";
    }
    else {
       inZ.src = "images/switchoff.jpg"; 
    }

    if(fz.value == "No fault" && imageZ.src.match("switchon"))
    {
        imageZ.src = "images/switchoff.jpg";
    }
    else if(fz.value == "No fault")
    {
        imageZ.src = "images/switchon.jpg";
    }
    checkOutputC();
}

function changeFaultZ() {
    var buttonz = document.getElementById("faultz");
    var imageZ = document.getElementById("switchz");

    if(buttonz.value == "No fault")
    {
        buttonz.value = "Stuck at 0";
        imageZ.src = "images/switchoff.jpg";
    }
    else if(buttonz.value == "Stuck at 0")
    {
        buttonz.value = "Stuck at 1";
        imageZ.src = "images/switchon.jpg";
    }
    else    
        buttonz.value = "No fault";
    checkOutputC();
}

function changeFaultXor1() {
    var button1 = document.getElementById("faultxor1");

    if(button1.value == "No fault")
    {
        button1.value = "Stuck at 0";
    }
    else if(button1.value == "Stuck at 0")
    {
        button1.value = "Stuck at 1";
    }
    else
        button1.value = "No fault";
    checkOutputC();
}

function changeFaultXor2() {
    var button1 = document.getElementById("faultxor2");

    if(button1.value == "No fault")
    {
        button1.value = "Stuck at 0";
    }
    else if(button1.value == "Stuck at 0")
    {
        button1.value = "Stuck at 1";
    }
    else
        button1.value = "No fault";
    checkOutputC();
}

function changeImageP() {
    var fp = document.getElementById("faultp");
    var imagep = document.getElementById("switchp");

    var inP = document.getElementById("inputp");
    if(inP.src.match("images/switchoff.jpg")) {
        inP.src = "images/switchon.jpg";
    }
    else {
       inP.src = "images/switchoff.jpg"; 
    }

    if(fp.value == "No fault" && imagep.src.match("switchon"))
    {
        imagep.src = "images/switchoff.jpg";
    }
    else if(fp.value == "No fault")
    {
        imagep.src = "images/switchon.jpg";
    }
    checkOutputC();
}
function changeFaultP() {

    var buttonp = document.getElementById("faultp");
    var imagep = document.getElementById("switchp");

    if(buttonp.value == "No fault")
    {
        buttonp.value = "Stuck at 0";
        imagep.src = "images/switchoff.jpg";
    }
    else if(buttonp.value == "Stuck at 0")
    {
        buttonp.value = "Stuck at 1";
        imagep.src = "images/switchon.jpg";
    }
    else    
        buttonp.value = "No fault";
    checkOutputC();
}

function changeFaultC() {
    var buttonc = document.getElementById("faultc");

    if(buttonc.value == "No fault")
    {
        buttonc.value = "Stuck at 0";
    }
    else if(buttonc.value == "Stuck at 0")
    {
        buttonc.value = "Stuck at 1";
    }
    else
        buttonc.value = "No fault";
    checkOutputC();
}

function checkOutputC(){
    var imageX = document.getElementById("switchx");
    var imageY = document.getElementById("switchy");
    var imageZ = document.getElementById("switchz");

    var imageC = document.getElementById("outputC");
    var imageP = document.getElementById("switchp");
    var fc, fxor1, fxor2;
    fc = document.getElementById("faultc");
    fxor1 = document.getElementById("faultxor1");
    fxor2 = document.getElementById("faultxor2");

    //Stuck at Fault for C
    if(fc.value == "Stuck at 0")
    {
        imageC.src = "images/ledoff.jpg";
        return;
    }
    else if(fc.value == "Stuck at 1")
    {
        imageC.src = "images/ledon.jpg";
        return;
    }

    //Stuck at Fault, Xor1 and Xor2
    if(fxor1.value == "No fault" && fxor2.value == "Stuck at 0")
    {
        if(imageX.src.match("images/switchon.jpg") && imageY.src.match("images/switchoff.jpg"))
            imageC.src = "images/ledon.jpg";
        else if(imageX.src.match("images/switchoff.jpg") && imageY.src.match("images/switchon.jpg"))
            imageC.src = "images/ledon.jpg";
        else 
            imageC.src = "images/ledoff.jpg";
        return;
    }
    else if(fxor1.value == "No fault" && fxor2.value == "Stuck at 1")
    {
        if(imageX.src.match("images/switchon.jpg") && imageY.src.match("images/switchon.jpg"))
            imageC.src = "images/ledon.jpg";
        else if(imageX.src.match("images/switchoff.jpg") && imageY.src.match("images/switchoff.jpg"))
            imageC.src = "images/ledon.jpg";
        else 
            imageC.src = "images/ledoff.jpg";
        return;
    }
    else if(fxor1.value == "Stuck at 0" && fxor2.value == "No fault")
    {
        if(imageZ.src.match("images/switchon.jpg") && imageP.src.match("images/switchoff.jpg"))
            imageC.src = "images/ledon.jpg";
        else if(imageZ.src.match("images/switchoff.jpg") && imageP.src.match("images/switchon.jpg"))
            imageC.src = "images/ledon.jpg";
        else 
            imageC.src = "images/ledoff.jpg";
        return;
    }
    else if(fxor1.value == "Stuck at 0" && fxor2.value == "Stuck at 0")
    {
        imageC.src = "images/ledoff.jpg";
        return;
    }
    else if(fxor1.value == "Stuck at 0" && fxor2.value == "Stuck at 1")
    {
        imageC.src = "images/ledon.jpg";
        return;
    }
    else if(fxor1.value == "Stuck at 1" && fxor2.value == "No fault")
    {
        if(imageZ.src.match("images/switchoff.jpg") && imageP.src.match("images/switchoff.jpg"))
            imageC.src = "images/ledon.jpg";
        else if(imageZ.src.match("images/switchon.jpg") && imageP.src.match("images/switchon.jpg"))
            imageC.src = "images/ledon.jpg";
        else 
            imageC.src = "images/ledoff.jpg";
        return;
    }
    else if(fxor1.value == "Stuck at 1" && fxor2.value == "Stuck at 0")
    {
        imageC.src = "images/ledon.jpg";
        return;
    }
    else if(fxor1.value == "Stuck at 1" && fxor2.value == "Stuck at 1")
    {
        imageC.src = "images/ledoff.jpg";
        return;
    }

    //no faults at XOR lines
    if(imageP.src.match("images/switchon.jpg"))
    {
        if(imageX.src.match("images/switchoff") && imageY.src.match("images/switchoff") && imageZ.src.match("images/switchoff"))
        {
            imageC.src = "images/ledon.jpg";
        }
        else if(imageX.src.match("images/switchoff") && imageY.src.match("images/switchon")&& imageZ.src.match("images/switchon"))
        {
            imageC.src = "images/ledon.jpg";
        }
        else if(imageX.src.match("images/switchon") && imageY.src.match("images/switchoff")&& imageZ.src.match("images/switchon"))
        {
            imageC.src = "images/ledon.jpg";
        }
        else if(imageX.src.match("images/switchon") && imageY.src.match("images/switchon")&& imageZ.src.match("images/switchoff"))
        {
            imageC.src = "images/ledon.jpg";
        }
        else
        {
            imageC.src = "images/ledoff.jpg";
        }
    }
    else //P is OFF
    {
        if(imageX.src.match("images/switchoff") && imageY.src.match("images/switchoff") && imageZ.src.match("images/switchoff"))
        {
            imageC.src = "images/ledoff.jpg";
        }
        else if(imageX.src.match("images/switchoff") && imageY.src.match("images/switchon")&& imageZ.src.match("images/switchon"))
        {
            imageC.src = "images/ledoff.jpg";
        }
        else if(imageX.src.match("images/switchon") && imageY.src.match("images/switchoff")&& imageZ.src.match("images/switchon"))
        {
            imageC.src = "images/ledoff.jpg";
        }
        else if(imageX.src.match("images/switchon") && imageY.src.match("images/switchon")&& imageZ.src.match("images/switchoff"))
        {
            imageC.src = "images/ledoff.jpg";
        }
        else
        {
            imageC.src = "images/ledon.jpg";
        }
    }
}

function resetTable()
{
    var bodyRef = document.getElementById('output').getElementsByTagName('tbody')[0];
    bodyRef.innerHTML = '';
}

function addToTable() 
{
    var table = document.getElementById("output").getElementsByTagName('tbody')[0];
    var row = table.insertRow();
    var ix,iy,iz,ip,ic;
    ix = document.getElementById("inputx");
    iy = document.getElementById("inputy");
    iz = document.getElementById("inputz");
    ip = document.getElementById("inputp");
    ic = document.getElementById("outputC");
    
    var x,y,z,p,c, count;

    count = 0;
    if(ix.src.match("images/switchon.jpg")) 
    {   
        x = 1;
        count += 1;
    }
    else 
       x = 0;

    if(iy.src.match("images/switchon.jpg")) 
    {   
        y = 1;
        count += 1;
    }
    else 
       y = 0;

    if(iz.src.match("images/switchon.jpg")) 
    {   
        z = 1;
        count += 1;
    }
    else 
       z = 0;

    if(ip.src.match("images/switchon.jpg")) 
    {  
        p = 1;
        count += 1;
    }
    else 
       p = 0;

    if(ic.src.match("images/ledon.jpg")) 
       c = 1;
    else 
       c = 0;
    
    var expectedOutput = 0;
    if(count%2)
    {
        expectedOutput = 1;
    }

    var c0 = document.createElement('td');
    c0.style.width = '50px';
    c0.innerHTML = x;
    row.appendChild(c0);

    var c1 = document.createElement('td');
    c1.style.width = '50px';
    c1.innerHTML = y;
    row.appendChild(c1);

    var c2 = document.createElement('td');
    c2.style.width = '50px';
    c2.innerHTML = z;
    row.appendChild(c2);

    var c3 = document.createElement('td');
    c3.style.width = '50px';
    c3.innerHTML = p;
    row.appendChild(c3);

    var c4 = document.createElement('td');
    c4.style.width = '140px';
    c4.innerHTML = c;
    row.appendChild(c4);

    var c5 = document.createElement('td');
    c5.style.width = '140px';
    c5.innerHTML = expectedOutput;
    row.appendChild(c5);

    if(expectedOutput == c)
        row.style.backgroundColor = "#A6ECA8"
    else
        row.style.backgroundColor = "#FFCCCB"
}
</script>
</html>